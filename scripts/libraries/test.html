<!DOCTYPE html>
<html>
<head>
    <title>Simple Save System Test</title>
</head>
<body>
    <h1>Simple Save System Test</h1>
    <button onclick="testSave()">Test Save</button>
    <button onclick="testLoad()">Test Load</button>
    <div id="output"></div>

    <script src="simple-save.js"></script>
    <script>
        // Mock WigdosXP Firebase API for testing
        window.firebaseAPI = {
            db: null,
            setDoc: async (doc, data, options) => {
                console.log('Mock Firebase save:', doc, data);
                return Promise.resolve();
            },
            getDoc: async (doc) => {
                console.log('Mock Firebase load:', doc);
                return {
                    exists: () => false,
                    data: () => ({})
                };
            },
            doc: (db, collection, docId) => {
                return { collection, docId };
            }
        };

        const saves = new SimpleSaveSystem();

        async function testSave() {
            const testData = { level: 5, score: 1000, timestamp: Date.now() };
            const result = await saves.save('undertale', testData);
            document.getElementById('output').innerHTML = `Save result: ${result}<br>Data: ${JSON.stringify(testData)}`;
        }

        async function testLoad() {
            const data = await saves.load('undertale');
            document.getElementById('output').innerHTML = `Loaded data: ${JSON.stringify(data)}`;
        }
    </script>
</body>
</html>